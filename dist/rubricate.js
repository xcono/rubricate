!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=22)}([function(e,t,n){"use strict";function r(e){return new CustomEvent(t.APP_CREATED,{detail:{app:e}})}function i(e){return new CustomEvent(t.APP_FORM_CREATED,{detail:{form:e}})}function a(e){return new CustomEvent(t.PLUGIN_FORM_INSERT,{detail:{pluginType:e}})}function u(e){return new CustomEvent(t.PLUGIN_FORM_INSERTED,{detail:{plugin:e}})}function o(e){return new CustomEvent(t.PLUGIN_FORM_REMOVED,{detail:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.APP_CREATED="rubricate__app_created",t.APP_FORM_CREATED="rubricate__form_created",t.PLUGIN_FORM_INSERT="rubricate__plugin_form_insert",t.PLUGIN_FORM_INSERTED="rubricate__plugin_form_inserted",t.PLUGIN_FORM_REMOVED="rubricate__remove_plugin",t.app_created=r,t.app_form_created=i,t.plugin_form_insert=a,t.plugin_form_inserted=u,t.plugin_form_removed=o},function(e,t,n){"use strict";function r(e,t){var n=document.createElement("div");n.classList.add(d+"__plugin"),n.classList.add(d+"-plugin"),n.id=e.guid,n.setAttribute("data-guid",e.guid),n.setAttribute("data-order",t.order?t.order.toString():Number.MAX_SAFE_INTEGER);var r=document.createElement("div");return r.classList.add(d+"-plugin__form"),r.appendChild(e.getForm()),n.appendChild(o(e)),n.appendChild(r),n}function i(e){var t=document.createElement("div");t.classList.add(d);var n=a(t,e);return t.appendChild(n),t}function a(e,t){var n=document.createElement("ul");n.classList.add(d+"__menu"),n.classList.add(d+"-menu");var r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;n.appendChild(u(e,l))}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}function u(e,t){var n=document.createElement("li");if(n.classList.add(d+"-menu__item"),t.hasOwnProperty("getIcon")&&"function"==typeof t.getIcon){var r=document.createElement("img");r.src=t.getIcon(),r.title=t.getName(),r.classList.add(d+"-menu__item-icon"),n.appendChild(r)}else n.innerText=t.getName();return n.addEventListener("click",function(){e.dispatchEvent(c.plugin_form_insert(t))}),n}function o(e){var t=document.createElement("div");t.classList.add(d+"-plugin__header");var n=document.createElement("div");n.classList.add(d+"-plugin__name"),n.innerText=e.constructor.getName(),t.appendChild(n);var r=document.createElement("div");r.classList.add(d+"-plugin__drag"),r.innerText="✣",t.appendChild(r);var i=document.createElement("div");i.classList.add(d+"-plugin__actions"),t.appendChild(i);var a=document.createElement("div");return a.classList.add(d+"-plugin__action"),a.classList.add(d+"-plugin__action--delete"),a.innerText="×",i.appendChild(a),a.addEventListener("click",function(){document.getElementsByClassName(d)[0].dispatchEvent(c.plugin_form_removed(e))}),t}function s(e){var t=document.createElement("div");return t.classList.add(d+"__message"),t.classList.add(d+"-message"),t.setAttribute("data-css-class",d+"-message"),e.appendChild(t),t}function l(e,t){var n=document.createElement("div");return n.classList.add(d+"-message__line"),n.classList.add(d+"-message__line--"+t),n.innerHTML=e,n}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),d="fs-form";t.streamPluginFormElement=r,t.streamFormElement=i,t.streamMessageElement=s,t.streamMessageLineElement=l},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);window.Rubricate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.hasOwnProperty("defaultData")&&t.defaultData||(t.defaultData={}),new r.default(e,t)}},,,,function(e,t){},,function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),u=n(0),o=n(13),s=n(11),l=function(){function e(t,n){r(this,e),this.el=t,this.types=new o.default,this.messenger=new s.default(this.el),this.form=new a.default(this.el,n,this.types,this.messenger),window.dispatchEvent(u.app_created(this)),this.form.render()}return i(e,[{key:"getData",value:function(){return this.form.getPluginFormValues()}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),u=n(12),o=n(0),s=function(){function e(t,n,i,a){r(this,e),this.options=n,this.types=i,this.plugins=new u.default,this.messenger=a,this.appElement=t}return i(e,[{key:"render",value:function(){var e=this;this.el=a.streamFormElement(this.types),this.appElement.appendChild(this.el),this.processDefaultDataPlugins(),this.initPluginRemoveEventListener(),this.appElement.dispatchEvent(o.app_form_created(this)),this.el.addEventListener(o.PLUGIN_FORM_INSERT,function(t){e.insertPluginForm(t.detail.pluginType)})}},{key:"processDefaultDataPlugins",value:function(){if(this.options.defaultData.hasOwnProperty("plugins")){var e=!0,t=!1,n=void 0;try{for(var r,i=this.options.defaultData.plugins[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value,u=this.types.get(a.type);u&&this.insertPluginForm(u,a)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}}},{key:"insertPluginForm",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new e(t,this.options);n.guid=t.guid?t.guid:this.generateGuid(),this.plugins.add(n);var r=a.streamPluginFormElement(n,t);n._el=r,this.el.appendChild(r),this.el.dispatchEvent(o.plugin_form_inserted(n))}},{key:"removePluginForm",value:function(e){e._removed=!0;var t=document.getElementById(e.guid);t.parentNode.removeChild(t),this.messenger.info("Plugin "+e.constructor.getName()+" deleted.")}},{key:"getPluginFormValues",value:function(){var e=[],t=[],n=!0,r=!1,i=void 0;try{for(var a,u=this.plugins.serialize()[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var o=a.value;if(o.removed)t=t.concat(o.uploads);else{var s=!0,l=!1,c=void 0;try{for(var d,f=o.uploads[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var v=d.value;v.removed&&(t=t.concat(v),o.uploads.splice(o.uploads.indexOf(v),1))}}catch(e){l=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(l)throw c}}e.push(o)}}}catch(e){r=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw i}}return{plugins:e,uploads_remove:t}}},{key:"generateGuid",value:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return(e()+e()+"-"+e()+"-4"+e().substr(0,3)+"-"+e()+"-"+e()+e()+e()).toLowerCase()}},{key:"initPluginRemoveEventListener",value:function(){var e=this;this.el.addEventListener(o.PLUGIN_FORM_REMOVED,function(t){e.removePluginForm(t.detail)})}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),u=function(){function e(t){r(this,e),this.lines=[],this.el=a.streamMessageElement(t)}return i(e,[{key:"push",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.INFO,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,u=a.streamMessageLineElement(t,r),o=this.lines.push(u);this.el.appendChild(u),setTimeout(function(){u.parentNode.removeChild(u),delete n.lines[o]},1e3*i)}},{key:"info",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;this.push(t,e.INFO,n)}},{key:"warning",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;this.push(t,e.WARNING,n)}},{key:"error",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;this.push(t,e.ERROR,n)}}]),e}();u.INFO="info",u.WARNING="warning",u.ERROR="error",t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){r(this,e),this.length=0,this.items={}}return i(e,[{key:"add",value:function(e){this.items[e.guid]=e,this.length+=1}},{key:"get",value:function(e){return!!this.contains(e)&&this.items[e]}},{key:"remove",value:function(e){this.contains(e)&&delete this.items[e]}},{key:"contains",value:function(e){return this.items.hasOwnProperty(e)}},{key:Symbol.iterator,value:function(){var e=this.items,t=Object.keys(e),n=-1;return{next:function(){return{value:e[t[++n]],done:t.length<=n}}}}},{key:"serialize",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value,o={guid:u.guid,type:u.constructor.type,values:u.getValues(),uploads:[],removed:u._removed||!1,order:parseInt(u._el.getAttribute("data-order"))};if(u.getUploads){var s=!0,l=!1,c=void 0;try{for(var d,f=u.getUploads()[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var v=d.value;o.uploads.push(v)}}catch(e){l=!0,c=e}finally{try{!s&&f.return&&f.return()}finally{if(l)throw c}}}e.push(o)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e.sort(function(e,t){return e.order-t.order}),e}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){r(this,e),this.length=0,this.items={}}return i(e,[{key:"add",value:function(e){this.items[e.type]=e,this.length+=1}},{key:"get",value:function(e){return!!this.contains(e)&&this.items[e]}},{key:"contains",value:function(e){return this.items.hasOwnProperty(e)}},{key:Symbol.iterator,value:function(){var e=this.items,t=Object.keys(e),n=-1;return{next:function(){return{value:e[t[++n]],done:t.length<=n}}}}},{key:"asArray",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var u=i.value;e.push(u)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e}}]),e}();t.default=a},,,,,,,,,function(e,t,n){n(3),e.exports=n(7)}]);